!function(t){"use strict";var n="",e=Object.prototype.toString,i=Object.prototype.hasOwnProperty,r=function(){},o=Array.prototype.slice,s=null,u=function(){return s||(s=document.createElement("div"))},a=0,c=0,l={},f=window.bingo={version:{major:2,minor:0,rev:0,build:"beta1",toString:function(){return[this.major,this.minor,this.rev,this.build].join(".")}},bgNoObserve:!0,isDebug:!1,prdtVersion:"",supportWorkspace:!1,stringEmpty:n,noop:r,config:function(t){return 0==arguments.length?l:(this.extend(l,t),void this.bgTrigger("config",[l]))},hasOwnProp:function(t,n){return i.call(t,n)},trace:function(t){console.error&&console.error(t.stack||t.message||t+"")},isType:function(t,n){return e.apply(n)==="[object "+t+"]"},isUndefined:function(n){return"undefined"==typeof n||n===t},isNull:function(t){return null===t||this.isUndefined(t)},isBoolean:function(t){return this.isType("Boolean",t)},isNullEmpty:function(t){return this.isNull(t)||t===n},isFunction:function(t){return this.isType("Function",t)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)},isString:function(t){return this.isType("String",t)},isObject:function(t){return!this.isNull(t)&&this.isType("Object",t)&&!this.isElement(t)&&!this.isWindow(t)},isPlainObject:function(n){if(!this.isObject(n))return!1;try{if(n.constructor&&!i.call(n,"constructor")&&!i.call(n.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var r;for(r in n);return r===t||i.call(n,r)},isArray:function(t){return Array.isArray?Array.isArray(t):this.isType("Array",t)},isWindow:function(t){return!(!t||t!=t.window)},isElement:function(t){var n=t&&(t.ownerDocument||t).documentElement;return!!n},trim:function(t){return this.isString(t)?t.replace(/(^\s*)|(\s*$)|(^\u3000*)|(\u3000*$)|(^\ue4c6*)|(\ue4c6*$)/g,""):this.isNull(t)?"":t.toString()},replaceAll:function(t,n,e,i){return this.isNullEmpty(t)||this.isNullEmpty(n)?t:(n=n.replace(/([^A-Za-z0-9])/g,"\\$1"),t=t.replace(new RegExp(n,i||"g"),e))},toStr:function(t){return this.isNull(t)?"":t.toString()},sliceArray:function(t,n,e){if(!t)return[];var i=o.call(arguments,1);return o.apply(t,i)},inArray:function(t,n){var e=-1;return this.isFunction(t)?n.some(function(n,i){return t.apply(n,arguments)===!0?(e=i,!0):void 0}):e=n.indexOf(t),e},removeArrayItem:function(t,n){var e=f.isFunction(t);return n.filter(function(n){return e?!t.apply(this,arguments):n!=t})},makeAutoId:function(){var t=(new Date).valueOf();return c=t==a?c+1:0,a=t,[t,c].join("_")},each:function(t,n,e){t&&n&&(f.isArray(t)||(t=this.sliceArray(t)),t.some(function(t){return n.apply(e||t,arguments)===!1}))},eachProp:function(t,n,e){if(t&&n){var i;this.each(Object.keys(t),function(t){return i=this[t],n.call(e||i,i,t,this)},t)}},htmlEncode:function(t){if(this.isNullEmpty(t))return"";var n=u();return n.textContent=t,n.innerHTML},htmlDecode:function(t){if(this.isNullEmpty(t))return"";var n=u();return n.innerHTML=t,n.textContent},extend:function(t){var n=arguments.length;if(1==n)return this.eachProp(t,function(t,n){this[n]=t},this),this;var e=this.sliceArray(arguments,1);return f.each(e,function(n){n&&this.eachProp(n,function(n,e){t[e]=n})},this),t},Class:function(t){var n=function(){var t=this._bgpro_;t&&(this._bgpro_=f.extend({},t)),this._bgpri_=new r,i&&i.apply(this,arguments)},e=n.prototype,i=null,r=function(){},o=r.prototype,s={Prop:function(t){e._bgpro_=f.extend(e._bgpro_||{},t),f.eachProp(t,function(t,n){e[n]=function(t){return 0==arguments.length?this._bgpro_[n]:(this._bgpro_[n]=t,this)}},this)},Event:function(t){e.bgEventDef(t)},Define:function(t){f.extend(e,t)},Private:function(t){f.extend(o,t)},Init:function(t){i=t}};return t.call(s),f.extend(e,{Extend:function(t){f.extend(this,t)},Private:function(t){f.extend(this._bgpri_,t)}}),n.constructor=n,n},proxy:function(t,n){return function(){return n&&n.apply(t,arguments)}},_splitEvName:function(t){return f.isString(t)?f.isNullEmpty(t)?null:f.trim(t).split(/\s+/g).map(function(t){return f.trim(t)}):t},isArgs:function(t,n){var e,i=f.sliceArray(arguments,1),r=!0;return f.each(i,function(n,i){return e=t[i],f.isString(n)?0==n.indexOf("@@")?r=n.substr(2)===e:f.each(n.split("|"),function(t){return r=h(t,e),r?void 0:!1}):r=h(n,e),r?void 0:!1}),r}},h=function(t,n){switch(t){case"obj":return f.isObject(n);case"str":return f.isString(n);case"array":return f.isArray(n);case"bool":return f.isBoolean(n);case"num":return f.isNumeric(n);case"null":return f.isNull(n);case"empty":return f.isNullEmpty(n);case"undef":return f.isUndefined(n);case"fun":return f.isFunction(n);case"regex":return!f.isNull(n)&&n instanceof RegExp;case"window":return f.isWindow(n);case"element":return f.isElement(n);case"*":return!0;default:return t===n}},p=function(t,n){return{configurable:!1,enumerable:!1,value:t,writable:n!==!1}};Object.defineProperties(Object.prototype,{bgDefProp:p(function(t,n,e){return Object.defineProperty(this,t,p(n,e)),this}),bgDefProps:p(function(t){var n={};return f.eachProp(t,function(t,e){n[e]=p(t)},this),Object.defineProperties(this,n),this})});var d=["bingoV"+f.version.major].join(""),v=[d,f.version.minor].join("_");window[d]=window[v]=f}(),function(t,n){"use strict";var e="fulfilled",i="rejected",r="pending",o=function(t){return new o.fn._init(t)},s=function(t){return t&&!!t.then};o.fn=o.prototype={constructor:o,_init:function(t,n){this.state=r,this._thenH=[];try{t(function(t){this._doNext(t,e)}.bind(this),function(t){this._doNext(t,i)}.bind(this))}catch(o){this._doNext(o,i)}return this},then:function(t,n){return this._thenH&&(this._thenH.push([t,n]),this.state!=r&&this._doNext(this._result,this.state)),this},_end:function(){this._thenH=null},_doNext:function(o,s){return o&&t.isFunction(o.then)?o.state!=i||o._thenH?(this.state=r,this._result=n,void o.then(function(t){this._doNext(t,e)}.bind(this))["catch"](function(t){this._doNext(t,i)}.bind(this))):(this.state=s,this._result=null,void this._end()):(this.state=s,this._result=o,void(0!=this._thenH.length&&this._doThenNext(o,s)))},_doThenNext:function(n,r){var o=this._thenH.shift()[r==e?0:1];switch(r){case e:try{n=t.isFunction(o)?o(n):n}catch(s){n=s}n instanceof Error?(this._doNext(n,i),t.trace(n)):this._doNext(n,e);break;case i:t.isFunction(o)?(this._end(),o(n)):this._doNext(n,i)}},"catch":function(t){return this.then(null,t)},"finally":function(t){return this.then(t,t)}},o.fn._init.prototype=o.fn,t.extend(o,{resolve:function(t){return o(function(n){n(t)})},reject:function(t){return o(function(n,e){e(t)})},timeout:function(t,n){return o(function(e){setTimeout(function(){e(n)},t)})},all:function(n,e,i){return o(function(r,o){var a=u(n,e),c=[],l=a.length;a.length>0?t.each(a,function(t,n){if(s(t)){var e=function(t){c[n]=t,--l||r(c)};t.then(e,i?e:o)}else c[n]=t,--l||r(c)}):r(c)})},race:function(n,e){return o(function(i,r){var o=u(n,e);o.length>0?t.each(o,function(t,n){s(t)?t.then(i,r):i(t)}):i()})},always:function(t,n){return this.all(t,n,!0)}});var u=function(n,e){if(n=t.sliceArray(n),0==n.length&&(n=[n]),!e)return n;var i=[];return t.each(n,function(t,n){i.push(e(t,n))}),i};o.when=o.all,o.isPromise=s,t.Promise=o}(bingo),function(t,n){"use strict";var e="_bg_evs_",i=t.noop,r={trigger:i,end:i,off:i},o=function(t,n,i){var o=t[e]||(t[e]={});return i===!0?o[n]||(o[n]=s()):o[n]||r},s=function(){return{isEnd:!1,list:[],on:function(t,n,e){t&&(this.isEnd?t&&t.call(n):this.list.push({one:e===!0,callback:t}))},off:function(t){t?this.list=this.list.filter(function(n){return n.callback!=t}):this.list=[]},end:function(t){try{this.trigger(n,t),this.off()}finally{this.isEnd=!0}},trigger:function(n,e,i){var r,o=this.list,s=!1;return t.each(o,function(t){return t.one===!0&&(s=!0),(r=t.callback.apply(e,n||[]))===!1?!1:i===!0?!1:void 0}),s&&(this.list=o.filter(function(t){return!t.one})),r}}},u=t._splitEvName,a=function(t){var n=t[e];n&&(t.bgOff(Object.keys(n).join(" ")),t[e]=null)};Object.prototype.bgDefProps({bgOn:function(n,e){return t.each(u(n),function(t){o(this,t,!0).on(e,this)},this),this},bgOne:function(n,e){return t.each(u(n),function(t){o(this,t,!0).on(e,this,!0)},this),this},bgOff:function(n,e){return 0==arguments.length?a(this):t.each(u(n),function(t){o(this,t).off(e)},this),this},bgEnd:function(n){return t.each(u(n),function(t){o(this,t,!0).end(this)},this),this},bgTrigger:function(n,e,i){var r;return t.each(u(n),function(t){r=o(this,t).trigger(e,i||this)},this),r},bgTriggerHandler:function(n,e,i){var r;return t.each(u(n),function(t){r=o(this,t).trigger(e,i||this,!0)},this),r},bgEventDef:function(n){return t.each(u(n),function(t){this[t]=function(n){return this.bgOn(t,n)}},this),this},bgDispose:function(n){if(this.bgIsDispose)return void(n&&n.bgDispose());if(1==arguments.length)return void(n&&n.bgIsDispose||(this._bg_dispose||(this._bg_dispose=[])).push(n));this.bgIsDispose=!0;try{this.bgDispose=t.noop,this.bgDisposeStatus=1,this.bgTrigger("_bg_disp_"),t.each(this._bg_dispose,function(t){t.bgDispose()})}finally{this._bg_clsobd(),t.eachProp(this,function(t,n){t&&t.bgAutoDispose===!0&&t.bgDispose(),this[n]=null},this),this.bgDispose=t.noop,this.bgIsDispose=!0,this.bgDisposeStatus=2}},bgOnDispose:function(t){return this.bgOn("_bg_disp_",t)},bgIsDispose:!1,bgDisposeStatus:0,bgAutoDispose:!1,bgSync:function(t,n){var e=this._bgSync_||(this._bgSync_={_count:0,_end:function(){0!=this._count&&(this._count--,0==this._count&&(i._bgSync_=null,this.bgTrigger("done",[],i)))}}.bgEventDef("done")),i=this;return this.bgSyncAdd(1),n&&e.done(n),t&&t.call(this),e},bgSyncAdd:function(n){(this._bgSync_||this.bgSync())._count++,!!n&&setTimeout(t.proxy(this,function(){this.bgSyncDec()}),n)},bgSyncDec:function(){this._bgSync_&&this._bgSync_._end()}})}(bingo),function(t,n){"use strict";var e=(t._splitEvName,"_bg_obdata_"),i=function(n){return t.isArray(n)||t.isObject(n)},r=function(n,r,s){e in n||!function(){var i,r=[];n.bgDefProp(e,{deep:s,obs:{},sobs:[],sendObj:function(e){i&&clearTimeout(i),r.push(e);var o=this.sobs;o.length>0&&(i=setTimeout(function(){try{t.each(o,function(t){t.fn&&t.fn.call(this,r)},n)}finally{i=0,r=[]}},1))}},!1)}();var a=n[e];return s=s!==!1||a.deep,t.each(r,function(t,e){if(0!=t.indexOf("_")){var r=n[t];if(!o(n,t)){a.obs[t]=[];var c=function(){return g&&g.push({name:t,object:this,value:r,isChild:(g[g.length-1]||{}).value==this,type:"get"}),r},l=function(n){if(g&&g.push({name:t,object:this,value:r,isChild:(g[g.length-1]||{}).value==this,type:"set"}),r!=n){var e=r;r=n,s&&i(r)&&r.bgToObserve(null,s),u(this,t,{name:t,object:this,value:r,oldValue:e,type:"update"})}};Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:c,set:l}),s&&i(r)&&r.bgToObserve(null,s)}}}),n[e]},o=function(t,n){return!!s(t,n)},s=function(n,i){var r=n[e];return r&&(t.isNull(i)?r.sobs:r.obs[i])},u=function(n,i,r){var o=s(n,i);t.each(o,function(t){t.fn&&t.fn.call(this,[r])},n);var u=n[e];u&&u.sendObj(r)},a=function(n,e,i){o(n,e)||r(n,t.isNull(e)?null:[e]);var u=s(n,e);return u&&u.push({fn:i}),u},c=function(n,i,r){var o;(o=n[e])&&(t.isNull(i)?r?o.sobs=o.sobs.filter(function(t){return t.fn!=r}):o.sobs=[]:o.obs[i]&&(r?o.obs[i]=o.obs[i].filter(function(t){return t.fn!=r}):o.obs[i]=[]))},l=function(t){var n=t[e];n&&(n.obs=[]),t.bgToObserve()};Object.prototype.bgDefProps({_bg_clsobd:function(){var t=this[e];t&&(t.deep=!1,t.obs={},t.sobs=[])},bgToObserve:function(n,e){return this.bgNoObserve?this:(t.isBoolean(n)&&(e=n,n=null),r(this,n?[n]:Object.keys(this),e),this)},bgObServe:function(n,e){return this.bgNoObserve?this:(t.isNull(n)||t.isFunction(n)?(this.bgToObserve(),a(this,null,n||e)):t.each(n?[n]:Object.keys(this),function(t){a(this,t,e)},this),this)},bgUnObServe:function(n,e){return this.bgNoObserve?this:(t.isNull(n)||t.isFunction(n)?c(this,null,n||e):t.each(n?[n]:Object.keys(this),function(t){c(this,t,e)},this),this)},bgPublish:function(t){var n=t?this[t]:this;u(this,t,{name:t,object:this,value:n,oldValue:n,type:"publish"})},bgDataValue:function(t,n){var e=y(this,t,!1);return arguments.length>1&&(e[0][e[1]]=n),e[0][e[1]]},bgTestProps:function(t){return y(this,t,!0)[2]},bgNoObserve:!1});var f=["reverse","splice","push","pop","copyWithin","fill","shift","unshift","sort"],h={};t.each(f,function(t){var n=Array.prototype[t];h[t]=function(){if(o(this)){var e=this.slice(),i=n.apply(this,arguments),r=e.length==this.length&&this.every(function(t,n){return t===e[n]});return r||(l(this),u(this,t,{name:t,object:this,value:this,oldValue:e,type:"update"})),i}return n.apply(this,arguments)}}),h.size=function(t){if(0==arguments.length)return this.length;var n=this.length;this.length!=t&&(n=this.slice(),this.length=t,this.bgToObserve(),u(this,"",{name:"",object:this,value:this,oldValue:n,type:"update"}))},Array.prototype.bgDefProps(h);var p=function(n,e){if(n===e)return!0;if(!t.isArray(e)||n.length!=e.length)return!1;for(var i=0,r=n.length;r>i;i++)if(n[i]!=e[i])return!1;return!0},d=function(n,e){if(n===e)return!0;if(!t.isObject(e))return!1;var i=0,r=!0;return t.eachProp(n,function(t,n){return i++,e[n]!==t?(r=!1,!1):void 0}),r&&t.eachProp(e,function(){i--}),r&&0===i};t.extend({observe:function(n,e,i,r){if(t.isArgs(arguments,"fun","fun")){var o=n,s=arguments[2]!==!1;i=e;var u,a,c,l=[],f=function(n,e,r){var s;try{if(s=3==arguments.length?r:o(),n||(t.isArray(c)?!p(c,s):t.isObject(c)?!d(c,s):c!=s)){var u=1==l.length?l[0]:null,f=u&&1==u.length?u[0]:null;return(e?i.orgFn||i:i).call(x,{name:f?f.name:"",value:s,oldValue:c,object:f?f.object:u||l,type:"bingo.observe"})}}finally{c=t.isArray(s)?t.sliceArray(s):t.isObject(s)?t.extend({},s):s,x.value=s,l=[],a=null}},h=function(t){t&&l.push(t),a||(a=setTimeout(f,1))},g=function(t){x.refresh(),h(t)},m=function(n){u=b(o),x.isSucc=v&&!$,x.isSucc&&(t.each(u.w,function(t){t.object.bgObServe(t.name,h)}),x.isObs=u.w.length>0,t.each(u.p,function(t){"toObsObj"in t&&t.value&&t.value.bgObServe(g),t.object.bgObServe(t.name,g)})),s?n!==!0?x.value=c=u.val:x.check():(x.value=c=u.val,f(!0,!0,c),s=!0)},w=function(){t.each(u.w,function(t){t.object.bgUnObServe(t.name,h)}),t.each(u.p,function(t){"toObsObj"in t&&t.value&&t.value.bgUnObServe(g),t.object.bgUnObServe(t.name,g)}),u=null},x={check:function(){h(null)},publish:function(t){return f(!0,t)},unObserve:function(){w(),this.bgDispose()},refresh:function(){w(),m(!0)},init:function(){x.init=t.noop,m()}};return s&&x.init(),x}if(n){var _=y(n,e,!1),n=_[0],A=_[1],j=function(){return n[A]};return t.observe(j,i,r)}},isObserve:function(t,n){return o(t,n)}}),t.observe.error=function(){$=!0};var v,$,g=null,b=function(t){try{g=[],v=!1,$=!1;var n=t(),e=m();return v=!0,e.val=n,e}finally{g=null}},m=function(){var n=[];t.each(g,function(t,e,i){var r=e+1,o=i.length==r;if(o)n.push(t);else{var s=i[r];s.isChild||n.push(t)}});var e=[];t.each(n,function(t){var n=e.some(function(n){return t.name==n.name&&t.object==n.object});n||e.push(t)});var i=[];return t.each(g,function(n){var r=n.value,o=!0;if((t.isNull(r)||t.isArray(r))&&(n.toObsObj=!0,o=!1),o=o&&e.some(function(t){return n.name==t.name&&n.object==t.object}),!o){var s=i.some(function(t){return n.name==t.name&&n.object==t.object});s||i.push(n)}}),{w:e,p:i}},y=function(n,e,i){if(!t.isString(e))return[n,e];var r="=bingo_dot=";e=e.replace(/\[(["']?)(.*?)\1\][.]?/g,function(t,n,e){return[".",e.replace(".",r),"."].join("")}).replace(/\.$/,"");var o=e.split("."),s=/[^0-9]/,u=o.length-2,a=n,c=e,l=!0;return u>=0&&t.each(o,function(t,n){return t=t.replace(r,"."),i&&!w(a,t)?(l=!1,!1):void(u>=n?a=a[t]?a[t]:a[t]=s.test(o[n+1])?{}:[]:(c=t,c in a||(a[c]=null)))}),[a,c,-1==u?w(a,c):l]},w=function(n,e){return t.isArray(n)||t.isObject(n)||t.isWindow(n)||t.isElement(n)||t.isFunction(n)?e in n:!1}}(bingo),function(t){"use strict";var n=function(n){return t.extend({name:n,bgNoObserve:!0,controller:r,_controller:{},service:o,_service:{},command:s,_command:{}},t.app._bg_appEx)},e=function(){return t.app(this.app)},i=function(n,i,r,o,s){var u=n[i];if(3==arguments.length)return u[r]||(n!=a?a[i][r]:null);if(t.isObject(o)&&s!==!1){var c=o;o=function(){return c}}t.isObject(o)||(o=h(o)),u[r]={name:r,fn:o,app:n.name,getApp:e,bgNoObserve:!0}},r=function(n,e){if(t.isFunction(n)||t.isArray(n))return n;var r=[this,"_controller"].concat(t.sliceArray(arguments));return i.apply(this,r)},o=function(n,e){var r=[this,"_service"].concat(t.sliceArray(arguments));return i.apply(this,r)},s=function(n,e){var r=[this,"_command"].concat(t.sliceArray(arguments));return i.apply(this,r)};t.extend({app:function(t,e){var i=t?u[t]||(u[t]=n(t)):a;if(!e)return i;c=i;try{return e&&e.call(i,i),i}finally{c=null}}});var u={},a=t.defualtApp=n("$$defualtApp$$"),c=null;t.extend(t.app,{_bg_appEx:{},extend:function(n){return t.extend(a,n),t.extend(this._bg_appEx,n)}});var l=function(){};l.$injects=[];var f=/^\s*function[^(]*?\(([^)]+?)\)/i,h=function(n){if(n&&(n.$injects||n.$fn))return n.$fn||n;var e=l;if(t.isArray(n)){var i=t.sliceArray(n);e=n.$fn=i.pop(),e.$injects=i,e.$owner=n.$owner}else if(t.isFunction(n)){e=n;var r=e.toString(),i=[];r.replace(f,function(n,e){e&&t.each(e.split(","),function(n){n=t.trim(n),n&&i.push(n)})}),e.$injects=i}return e},p=t.Promise,d=function(n,e,i,r){if(!n)throw new Error("not find inject: "+e);var o=n.$injects,s=[],u=[];if(o&&o.length>0){t.each(o,function(t){t in i?s.push(i[t]):u.push(v(t,i,r).then(function(n){s.push(i[t]=n)}))})}return p.always(u).then(function(){var o=n.apply(r||window,s);return t.isString(e)&&(i[e]=o),o})},v=function(n,e,i){var r=null,o="";return t.isFunction(n)||t.isArray(n)?r=h(n):(o=n,r=g(o,e)),$(r?r.$injects:[o],e).then(function(){return r||(r=g(o,e)),d(r,o,e,i)})},$=function(n,e){var i=e.$view.$app,r=[];return t.each(n,function(t){t in e||i.service(t)||r.push(i.usingAll("service::"+t))}),p.always(r)},g=function(t,n){var e=n.$view.$app.service(t);return e?e.fn:null};t.app.extend({inject:function(n,e,i){var r=t.rootView();return e=t.extend({$view:r,$cp:r.$ownerCP,$app:this},e),v(n,e,i||r)}})}(bingo),function(t){"use strict";var n,e=t.Promise,i=document,r=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=r.getElementsByTagName("base")[0],s=/loaded|complete|undefined/i,u=function(n,e,s){var u=i.createElement("script");u.type="text/javascript",u.charset=s||"utf-8",u.async=!0,u.defer=!1,u.src=n,a(u,e||t.noop),o?r.insertBefore(u,o):r.appendChild(u)},a=function(n,e){var i=function(){if(n&&s.test(n.readyState)){n.onload=n.onerror=n.onreadystatechange=null,!t.isDebug&&n.parentNode&&n.parentNode.removeChild(n);try{e&&e(n.src)}finally{n=void 0,e=null}}};n.onload=n.onerror=n.onreadystatechange=function(){i()}},c=[],l=[],f=[],h=function(t,n){f.push({fn:t,lv:n}),f.sort(function(t,n){return t.lv-n.lv}),!d()&&m()},p=function(t){return c.some(function(n){return n==t})},d=function(){return l.length>0},v=function(n){var e=t.inArray(function(t){return this.file==n},l);return e>=0?l[e]:null},$=function(t,e){if(p(t))e&&e(t);else{var i=v(t);i?i.fns.push(e):(l.push({file:t,fns:[e],status:0}),n||(n=setTimeout(g,0)))}},g=function(){n=null,t.each(l,function(t){if(!(t.status>0)){var n=t.file;t.status=1,u(n,function(){b(l,t)})}})},b=function(n,e){var i=n.indexOf(e);0>i||n.splice(i,1),c.push(e.file),t.each(e.fns,function(t){t&&t(e.file)}),m()},m=function(){var n=!d();if(n){l=[];var e=f;f=[],t.each(e,function(t){t.fn()})}else g()},y=/^(.+)\:\:(.*)/,w=function(t){var n,e;return y.test(t)?(n=RegExp.$1,e=RegExp.$2):e=t,{all:t,url:e,type:n||""}},x=function(t,n){return[n,t].join("::")},_=function(n,e,i,r,o){if(r!==!1){var s=w(i),u=s.type;t.isNullEmpty(u)&&(i=x(i,e));var a=n.route(i),c=t.config();return a?a.promise?a.promise(o):c[e](a.toUrl,o):c[e](s.url,o)}return c[e](i)};t.app.extend({using:function(t,n){return _(this,"using",t,n)},usingAll:function(n,e){return n&&this.using(n),t.isNumeric(e)||(e=t.using.Normal),t.Promise(function(t){h(t,e)})}}),t.using={},t.extend(t.using,{First:0,NormalBefore:45,Normal:50,NormalAfter:55,Last:100});var A=t.noop,j="text/html",O="text/plain",N="application/json",D=function(t){return t&&(t==j?"html":t==N?"json":/^(?:text|application)\/javascript/i.test(t)?"script":/^(?:text|application)\/xml/i.test(t)&&"xml")||"text"},P=function(t,n){return(t+"&"+n).replace(/[&?]{1,2}/,"?")},S=function(n){if(n.data){var e=[];t.isObject(n.data)&&(t.eachProp(n.data,function(n,i){e.push(encodeURIComponent(i)+"="+encodeURIComponent(t.isObject(n)||t.isArray(n)?JSON.stringify(n):n))}),n.data=e.join("&").replace("%20","+")),n.type&&"GET"!=n.type.toUpperCase()||(n.url=P(n.url,n.data))}},C={type:"GET",beforeSend:A,success:A,error:A,complete:A,context:null,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:N,xml:"application/xml, text/xml",html:j,text:O},crossDomain:!1,timeout:0},T=function(n){var e=t.extend({},n);for(var i in C)void 0===e[i]&&(e[i]=C[i]);e.crossDomain||(e.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(e.url)&&RegExp.$2!=window.location.host);var r=e.dataType,o=/=\?/.test(e.url);if("jsonp"==r||o)return o||(e.url=P(e.url,"callback=?")),E(e);e.url||(e.url=window.location.toString()),S(e);var s,u=e.accepts[r],a={},c=/^([\w-]+:)\/\//.test(e.url)?RegExp.$1:window.location.protocol,l=C.xhr();e.crossDomain||(a["X-Requested-With"]="XMLHttpRequest"),u&&(u+=", */*; q=0.01",a.Accept=u,l.overrideMimeType&&l.overrideMimeType(u)),(e.contentType||e.data&&"GET"!=e.type.toUpperCase())&&(a["Content-Type"]=e.contentType||"application/x-www-form-urlencoded; charset=UTF-8"),e.headers=t.extend(a,e.headers);var f=e.context;l.onreadystatechange=function(){if(4==l.readyState){clearTimeout(s);var t,n=!1,i="";if(l.status>=200&&l.status<300||304==l.status||0==l.status&&"file:"==c){r=r||D(l.getResponseHeader("content-type")),t=l.responseText;try{"script"==r?(0,eval)(t):"xml"==r?t=l.responseXML:"json"==r&&(t=/^\s*$/.test(t)?null:JSON.parse(t))}catch(o){n=o}n?(i="parsererror",e.error.call(f,l,i,n)):(i="success",e.success.call(f,t,i,l))}else i="error",e.error.call(f,l,i,l);e.complete.call(f,l,i)}};var h="async"in e?e.async:!0;l.open(e.type,e.url,h);for(name in e.headers)l.setRequestHeader(name,e.headers[name]);return e.beforeSend.call(f,l,e)===!1?(l.abort(),!1):(e.timeout>0&&(s=setTimeout(function(){l.onreadystatechange=A,l.abort(),e.complete.call(f,l,"timeout")},e.timeout)),l.send(e.data?e.data:null),l)},E=function(n){var e,i="jsonp"+t.makeAutoId(),o=document.createElement("script"),s=function(){r.removeChild(o),i in window&&(window[i]=A),n.complete.call(n.context,u,"abort")},u={abort:s};return n.error&&(o.onerror=function(){u.abort(),n.error()}),window[i]=function(t){clearTimeout(e),r.removeChild(o),delete window[i],settings.success.call(n.context,t,"success",u)},S(n),o.src=n.url.replace(/=\?/,"="+i),r.appendChild(o),n.timeout>0&&(e=setTimeout(function(){u.abort()},n.timeout)),u},k=/^\s*<(\w+|!)[^>]*>/;t.app.extend({ajax:function(t,n,e){return _(this,"ajax",t,e,n)},_tmpl:{},saveTmpl:function(t,n){this._tmpl[t]=n},tmpl:function(n,i,r){var o="",s=n;if(t.isString(n)){if(n.indexOf("#")<0)return!n||k.test(n)?e.resolve(n):_(this,"tmpl",n,i,r);var u=n.substr(1);if(this._tmpl[u])return e.resolve(this._tmpl[u]);s=document.getElementById(n.substr(1))}if(s){var a=s.children.length,c=s.firstElementChild;o=1==a&&"script"==c.tagName.toLowerCase()?c.innerHTML:s.innerHTML}return e.resolve(o)}});var I="_bg_cache2_";t.cache=function(n,e,i,r){var o=n[I];if(2==arguments.length){if(!o)return;var s=t.inArray(function(t){return t[0]==e},o);return s>-1?o[s][1]:void 0}4>arguments&&(r=20),o||(o=n[I]=[]);var s=t.inArray(function(t){return t[0]==e},o),u=s>-1?o[s]:null,a=(new Date).valueOf();return u?(u[1]=i,u[2]=a):(u=[e,i,a],o.push(u),o.length>=r+5&&(o.sort(function(t,n){return n[2]-t[2]}),n[I]=t.sliceArray(o,0,o.length-5))),i},t.cacheRemove=function(n,e){var i=n[I];if(i){var r=t.inArray(function(){return this[0]==e},i);return r>-1?i.splice(r,1)[0]:void 0}};var L=/(\W)/g,F=/\?[^?=]+\=.*$/,V=function(n){return!t.isNullEmpty(n)&&/[?*]+/.test(n.replace(F,""))},R=function(t){if(t=t.replace(F,""),!V(t))return null;L.lastIndex=0;var n=t.replace(L,"\\$1").replace(/\\\*\\\*/g,"(.*?)").replace(/(\\([?*]))/g,"([^./]$2?)");return n=["^",n,"$"].join(""),new RegExp(n)},U=/\{([^}]+)\}/gi,q=/\*\*|[?*](?!})/g,B=/\*$/,H=function(n,e){if(!n||!e.url)return null;var i=e.url,r=e._reg;if(!r){var o=i.indexOf("$")>=0?i.split("$")[0]:i;U.lastIndex=0,o=o.replace(U,function(t,n){return B.test(n)?"**":"*"}),r=e._reg=e._reg=R(o)}var s=n.split("$");if(!r.test(s[0]))return null;var u=[];i.replace(q,"{*}").replace(U,function(t,n,e){u.push({key:n,find:t})});var a,c={};s[0].replace(r,function(){var n=arguments;t.each(u,function(t,e){a=t.key,"*"!=a&&(c[a.replace("*","")]=n[e+1])})});var l=c.queryParams={};return s.length>1&&(s=t.sliceArray(s,1),t.each(s,function(t,n){var e=t.split(":"),i=e[0],r=decodeURIComponent(e[1]||"");i&&(c[i]=l[i]=r)})),c},M=function(){var n={app:null,controller:null},e=this.params;if(e){var i=e.app,r=t.app(i);n.app=r,e.controller&&(n.controller=r.controller(e.controller)),n.controller&&(n.controller=n.controller.fn)}return n},z=function(t,n,e,i,r){var o=t.promise,s=o&&function(t){return o(this.toUrl,t)};return{name:n,params:r,url:e,toUrl:i,promise:s,context:M}},W=",controller,service,app,queryParams,",J=function(n,e,i){if(U.lastIndex=0,!n||!e)return n;var r,o,s,u="";return t.eachProp(e,function(e,a){r=["{",a,"}"].join(""),o=["{",a,"*}"].join(""),n.indexOf(r)>=0?n=t.replaceAll(n,r,e):n.indexOf(o)>=0?n=t.replaceAll(n,o,e):W.indexOf(","+a+",")<0&&(s=encodeURIComponent(e||""),u=1==i?[u,"$",a,":",s].join(""):[u,"&",a,"=",s].join(""))}),u&&(n=1==i?[n,u].join(""):n.indexOf("?")>=0?[n,u].join(""):[n,u.substr(1)].join("?")),n},X=function(t){return t._route||(t._route=Z(t))};t.app.extend({route:function(t,n){return 1==arguments.length?this.routeContext(t):void(t&&n&&X(this).add(t,n))},routeContext:function(t){return X(this).getRouteByUrl(t)},routeLink:function(n,e){var i=X(this).getRuote(n);return i||this==t.defualtApp||(i=X(t.defualtApp).getRuote(n)),i?J(i.context.url,e,1):""},routeLinkQuery:function(n,e){n||(n="");var i="";if(n.indexOf("$")>=0||n.indexOf("?")>=0){var r=this.routeContext(n);e=t.extend({},e,r.params.queryParams);var o=n.indexOf("$")>=0?"$":"?";n=n.split(o)[0]}return t.eachProp(e,function(t,n){t=encodeURIComponent(t||""),i=[i,"$",n,":",t].join("")}),[n,i].join("")}});var Z=function(n){var e={bgNoObserve:!0,datas:[],add:function(n,e){var i=this.getRuote(n);t.isUndefined(e.priority)&&(e.priority=100),i?i.context=e:this.datas.push({name:n,context:e}),this.datas.sort(function(t,n){return t.context.priority-n.context.priority})},getRuote:function(n){var e=null;return t.each(this.datas,function(){return this.name==n?(e=this,!1):void 0}),e},getRouteByUrl:function(e){if(!e)return"";var i=w(e),r=i.type;e=i.url;var o=e.split("?"),s=e;o.length>1&&(e=o[0]);var u,a=null,c="",l=null;if(t.each(this.datas,function(){return a=this.context,u=a.type,u&&u!=r||!(l=H(e,a))?void 0:(c=this.name,!1)}),!l&&n!=t.defualtApp)return X(t.defualtApp).getRouteByUrl(s);l||(a=G,c="defaultRoute",l={}),(l||a.defaultValue)&&(l=t.extend({},a.defaultValue,l)),l.app=n.name,o.length>1&&(l||(l={}),o[1].replace(/([^=&]+)\=([^=&]*)/g,function(t,n,e){n in l||(l[n]=decodeURIComponent(e))}));var f=Q(a.toUrl,a,e,l);return z(a,c,e,f,l)}};return e},G={url:"**",toUrl:function(t,n){return t}},Q=function(n,e,i,r){return t.isFunction(n)&&(n=n.call(e,i,r)),J(n||"",r)};t.config({using:function(n){return t.Promise(function(t){$(n,function(n){t(n)})})},ajax:function(n,i){return e(function(e,r){T(t.extend({type:"post",dataType:"json"},i,{url:n,success:function(t){try{i&&i.success&&i.success.apply(this,arguments),e(t)}catch(n){r(n)}},error:function(){try{i&&i.error&&i.error.apply(this,arguments),r(arguments[2])}catch(t){r(t)}}}))})},tmpl:function(n,i){var r=n,o=t.cache(K,r);if(t.isString(o))return e.resolve(o);var s=function(n){return t.isString(n)&&t.cache(K,r,n,200),n};return t.config().ajax(n,t.extend({dataType:"text",type:"get"},i)).then(s)}});var K={}}(bingo),function(t,n){"use strict";var e,i=[],r=function(t){i.push(t),e.start()},o=function(){var n=[],e=i;i=[],t.each(e,function(t){t._stop||(t.n--,t.n<0?t.fn(t):n.push(t))}),n.length>0&&(i=n.concat(i))},s=function(){return!!i.length};!function(n,i){for(var r=window.requestAnimationFrame,u=window.cancelAnimationFrame,a=Date.now||function(){return(new Date).getTime()},c=a(),l=["ms","moz","webkit","o"],f=l.length;--f>-1&&!r;)r=window[l[f]+"RequestAnimationFrame"],u=window[l[f]+"CancelAnimationFrame"]||window[l[f]+"CancelRequestAnimationFrame"];var h,p,d,v,$,g=t.isAFrame=i!==!1&&r,b={},m=function(){},y=a(),w=500,x=33,_=1e-10,A=!0,j=!1,O=function(t){var n,e,i=a()-c;i>w&&(y+=i-x),c+=i,b.time=(c-y)/1e3,n=b.time-$,(!h||n>0||t===!0)&&($+=n+(n>=v?.004:v-n),e=!0),t!==!0&&(d=p(O)),e&&(j||s()||b.sleep(),o(),j=s())};b.time=b.frame=0,b.tick=function(){O(!0)},b.lagSmoothing=function(t,n){w=t||1/_,x=Math.min(n,w,0)},b.sleep=function(){A||(A=!0,null!=d&&(g?u(d):clearTimeout(d),p=m,d=null))},b.wake=function(t){null!==d?b.sleep():t?y+=-c+(c=a()):b.frame>10&&(c=a()-w+5),p=0===h?m:g?r:function(t){return setTimeout(t,1e3*($-b.time)+1|0)},O(2),A=!1},b.fps=function(t){return arguments.length?(h=t,v=1/(h||60),$=this.time+v,void b.wake()):h},b.start=function(){A&&b.fps(n)},e=b}(60,!0),t.aFrame=function(n,e){(!t.isNumeric(e)||0>e)&&(e=0);var i={fn:n,n:e,_stop:!1,stop:function(){this._stop=!0},next:function(n){return t.aFrame(n,this.n+1)},frame:t.aFrame};return r(i),i},t.aFramePromise=function(n){return u(function(e){t.aFrame(e,n)})},t.aFrameProxy=function(n,e,i){var r=!1,o=function(){if(!r){r=!0;var o=arguments;t.aFrame(function(){i&&i.bgIsDispose||(r=!1,n.apply(this,o))}.bind(this),e)}};return o.orgFn=n,o};var u=t.Promise,a=u.isPromise,c=function(t,n){return a(n)&&t.push(n),n},l=function(n,e){return t.each(e,function(t){c(n,t)}),e},f=function(t,e){return e||t.length>0?u.always(t):n},h={_cacheName:"__contextFun__",bindContext:function(n,e,i){var r,o=[e,i].join("_"),s=n[h._cacheName]||(n[h._cacheName]={});if(s[o])return s[o];if(r=t.cache(h,o))return r;i&&(e=["try { return ",e,";} catch (e) {bingo.observe.error(e);}"].join(""));var u=["return function (_this_, $view, $withData, bingo, event) {","with ($view) {","with ($withData) {",e,"}","}","};"].join("");try{return r=s[o]=new Function(u)(),t.cache(h,o,r,36),r}catch(a){t.trace(e)}},reset:function(t){t[h._cacheName]={}}},p=function(n){var e={$extend:function(n){return t.extend(this,n)}};return e.$extend(n)},d=function(e,i){var r={obsList:[],withData:{},valueObj:function(t){if(this.valueParams)return this.valueParams;var n=t.$contents,e=this.withData,i=t.$view,r=!!e&&e.bgTestProps(n),o=r?!1:i.bgTestProps(n),s=o?!1:window.bgTestProps(n),u=r?e:r?window:i;return this.valueParams=[u,r||o||s]}},o=p({bgNoObserve:!0,$view:null,$node:null,$contents:"",$withData:function(n,e){switch(arguments.length){case 0:return r.withData;case 1:return t.isObject(n)?r.withData=n:r.withData[n];case 2:return r.withData[n]=e}},$bindContext:function(n,e){return function(i){return h.bindContext(this,n,e)(this.$node||this.$view,this.$view,r.withData||{},t,i)}.bind(this)},$hasProps:function(){return r.valueObj(this)[0].bgTestProps(this.$contents)},$value:function(t){var n=this.$contents,e=r.valueObj(this)[0];return 0==arguments.length?e.bgDataValue(n):void e.bgDataValue(n,t)},$result:function(t){var n=this.$bindContext(this.$contents,!0);return n(t)},$eval:function(t){var n=this.$bindContext(this.$contents,!1);return n(t)},$layout:function(t,n,e,o){if(1==arguments.length)return void this.$init(t);var s=this.$view.$layout(t,n,e,this,!0,o===!1);return r.obsList.push(s),o!==!1&&i&&i.pushStep("CPInit",function(){return this.$view.bgToObserve(!0),[s.init()]}.bind(this)),s},$layoutResult:function(t,n,e){return this.$layout(function(){return this.$result()}.bind(this),t,n,e)},$layoutValue:function(t,e,i){return this.$hasProps()||this.$value(n),this.$layout(function(){return this.$value()}.bind(this),t,e,i)},$init:function(t){O(this,i,"CPInit",t)},$ready:function(t){O(this,i,"CPReady",t)}}).$extend(e);return o.bgOnDispose(function(){t.each(r.obsList,function(t){t.bgIsDispose||t.unObserve()})}),o.bgDispose(r),o},v=function(n,e,i,r,o){o.pushStep(e,function(){
if(!this.bgIsDispose){var n=i[r],e=[];return n.length>0&&(i[r]=[],t.each(n,function(t){c(e,t&&t.call(this,this))},this)),this.bgToObserve(),e}}.bind(n))},$=function(n,e){var i={obsList:[],obsListUn:[],ctrls:[],inits:[],readys:[]},r={},o={},s=p({$ownerCP:null,$parent:null,$children:[],$controller:function(t){i.ctrls.push(t)},$init:function(n,e){if(2==arguments.length)(r[n]||(r[n]=[])).push(e);else{if(t.isString(n))return r[n];i.inits.push(n)}},$ready:function(n,e){if(2==arguments.length)(o[n]||(o[n]=[])).push(e);else{if(t.isString(n))return o[n];i.readys.push(n)}},$observe:function(n,e,r,o,s){s!==!1&&this.bgToObserve(!0);var u=function(){return this.bgIsDispose?void 0:e.apply(this,arguments)}.bind(this);u.orgFn=e.orgFn;var a=t.isFunction(n)?t.observe(n,u,s):t.observe(this,n,u,s);return o&&a.isObs||(a.isObs?i.obsList:i.obsListUn).push([a,r,o]),a},$layout:function(n,e,i,r,o,s){return this.$observe(n,t.aFrameProxy(e,i,r),r,o,s)},$layoutAfter:function(t,n,e,i,r){return this.$layout(t,n,1,e,i,r)},$update:function(t){this.$isReady&&(i.obsListUn=i.obsListUn.filter(function(n,e){var r=n[1],o=n[0];n[2];return r&&r.bgIsDispose?(o.unObserve(),!1):!o.bgIsDispose&&(o.isSucc?o.isObs||(t?o.refresh():o.check()):o.refresh(),o.isObs)?(n[2]||i.obsList.push(n),!1):!0},this))},$updateAsync:function(){this._upastime_&&clearTimeout(this._upastime_),this._upastime_=setTimeout(function(){this.bgIsDispose||this.$update()}.bind(this),1)},$remove:function(){this.$ownerCP&&this.$ownerCP.$html("")},$getNodes:function(){return this.$ownerCP.$getNodes()},$query:function(t){return this.$ownerCP.$query(t)},$queryAll:function(t){return this.$ownerCP.$queryAll(t)},$insertBefore:function(t,n){return this.$ownerCP.$insertBefore(t,n)},$insertAfter:function(t,n){return this.$ownerCP.$insertAfter(t,n)},$inject:function(n,e,i){return this.$app.inject(n,t.extend({$view:this,$cp:this.$ownerCP},e),i)},$link:function(n,e){if(e||(e=this.$parent),e){var i=e==this;t.eachProp(n,function(t,n){var r=0==t.indexOf("@");r&&(t=t.substr(1)),i&&t==n||(e.$observe(t,function(t){this.bgDataValue(n,t.value)}.bind(this)),this[n]=e.bgDataValue(t),r?this.bgToObserve(!0):this.$observe(n,function(n){this.bgDataValue(t,n.value)}.bind(e)))},this)}}}).$extend(n),u=s.$parent;return u&&u.$children.push(s),s.bgOnDispose(function(){t.each(i.obsList,function(t){t[0].bgIsDispose||t[0].unObserve()}),t.each(i.obsListUn,function(t){t[0].bgIsDispose||t[0].unObserve()}),B(this.$app,this),u&&!u.bgIsDispose&&(u.$children=t.removeArrayItem(this,u.$children))}),s.bgDispose(i),e&&(e.pushStep("ViewCtrl",function(){if(!this.bgIsDispose){var n=i.ctrls,e=[];return n.length>0&&(i.ctrls=[],t.each(n,function(t){c(e,this.$inject(t))},this)),e}}.bind(s)),v(s,"ViewInit",i,"inits",e),v(s,"ViewReady",i,"readys",e)),q(s.$app,s),s},g="_bgcp_",b=function(t){return t[g]},m=function(n){n&&t.each(n,function(t){t[g]=null,et(t)})},y=function(n){var e=[];t.each(n.$nodes,function(t){t.parentNode&&e.push(t)}),n.$nodes=e},w=function(t,n){y(t);var e=(t.$nodes,t.$nodes.length);return e>0?t.$nodes[n?e-1:0]:null},x=function(n){t.each(n.$children,function(t){t.bgDispose()}),t.each(n.$virtualNodes,function(t){t.bgDispose()}),n.$ownerView&&n.$ownerView.bgDispose(),n.$children=n.$ownerView=null,n.$virtualNodes=[]},_=function(n,e){var i=w(n),r=n.$children[0],o=r&&w(r);if(o){var s=i.parentNode;if(o.parentNode!=s)return i;e||(e=t.sliceArray(s.childNodes));var e=t.sliceArray(s.childNodes);return t.inArray(i,e)<t.inArray(o,e)?i:_(r,e)}return i},A=function(n,e){var i=w(n,!0),r=n.$children[n.$children.length-1],o=r&&w(r,!0);if(o){var s=i.parentNode;return o.parentNode!=s?i:(e||(e=t.sliceArray(s.childNodes)),t.inArray(i,e)>t.inArray(o,e)?i:A(r,e))}return i},j=function(t){var n=_(t),e=A(t);if(n==e)return[n];for(var i=1==n.nodeType?[n]:[],r=n;e!=(r=r.nextSibling)&&r;)1==r.nodeType&&i.push(r);return 1==e.nodeType&&i.push(e),i},O=function(t,n,e,i){n&&n.pushStep(e,function(){return[i.call(t)]})},N=function(n,e,i){var r={ctrl:null,tmpl:"",getContent:function(n){var e=this.tmpl;return t.isFunction(e)?e():e},render:function(n,e){var i=this.getContent(n);a(i)?i.then(function(i){z(t.trim(i),n,e)}):z(t.trim(i),n,e),c(X,i)}},o=d({$ownerView:null,$app:null,$cmd:"",$attrs:null,$nodes:null,$virtualNodes:[],$isAFrame:!0,$setNodes:function(n){m(this.$nodes),this.$nodes=n,t.each(n,function(t){t[g]=this},this)},$getNodes:function(){return j(this)},$query:function(t){return this.$queryAll(t,!0)[0]},$queryAll:function(n,e){var i=[],r=!!n;return t.each(this.$nodes,function(o){return 1==o.nodeType&&(r?i=i.concat(t.sliceArray(nt(n,o))):i.push(o),e&&i.length>0)?!1:void 0}),i},$parent:null,$children:null,$removeChild:function(n){this.$children=t.removeArrayItem(n,this.$children)},$getChild:function(n){var e;return t.each(this.$children,function(){return this.$id==n?(e=this,!1):void 0}),e},$export:null,$remove:function(){this.bgDispose()},$html:function(n){if(arguments.length>0)return x(this),this.$tmpl(n),mt({cp:this,context:w(this),opName:"insertBefore"});var e=[];return t.each(this.$nodes,function(t){e.push(1==t.nodeType?t.outerHTML:t.textContent)}),e.join("")},$insertBefore:function(n,e){var i=e&&(e.$ownerCP||e)||this,r=_(i);if(t.isString(n))return mt({tmpl:n,view:i.$ownerView||i.$view,parent:e?(e.$ownerCP||e).$parent:i,context:r,opName:"insertBefore"}).then(function(t){return t.$parent.$children.unshift(t),t});var o=this.$children,s=n.$ownerCP||n,a=t.inArray(s,o);if(a>=0)if(i==this)a>0&&(o.splice(a,1),o.unshift(s),ct(j(s),r,"insertBefore"));else{var c=t.inArray(i,o);c>=0&&c-1!=a&&(o.splice(a,1),o.splice(c,0,s),ct(j(s),r,"insertBefore"))}return u.resolve(s)},$insertAfter:function(n,e){var i=e&&(e.$ownerCP||e)||this,r=A(i),o=r.nextSibling;if(t.isString(n))return mt({tmpl:n,view:i.$ownerView||i.$view,parent:e?(e.$ownerCP||e).$parent:i,context:o?o:r.parentNode,opName:o?"insertBefore":"appendTo"}).then(function(t){return t.$parent.$children.push(t),t});var s=n.$ownerCP||n,a=this.$children,c=t.inArray(s,a);if(c>=0){var l=a.length-1;if(i==this)c!=l&&(a.splice(c,1),a.push(s),ct(j(s),o?o:r.parentNode,o?"insertBefore":"appendTo"));else{var f=t.inArray(i,a);f>=0&&c-1!=f&&(a.splice(c,1),a.splice(f+1,0,s),ct(j(s),o?o:r.parentNode,o?"insertBefore":"appendTo"))}}return u.resolve(s)},$text:function(n){if(arguments.length>0)return x(this),this.$contents=this.tmplTag=t.htmlEncode(n),gt(w(this),this,"insertBefore");var e=[];return t.each(this.$nodes,function(t){e.push(t.textContent)}),e.join("")},$tmpl:function(t){return r.tmpl=t,this},$saveTmpl:function(t,n,e){if(e)this.$app.saveTmpl(t,n);else{var i=(this.$ownerView||this.$view).$ownerCP,r=i.__tmpl||(i.__tmpl={});r[t]=n}},$loadTmpl:function(n){if(t.isString(n)&&0==n.indexOf("#")){var e=n.substr(1),i=(this.$ownerView||this.$view).$ownerCP,r=i.__tmpl&&i.__tmpl[e];return t.isString(r)?u.resolve(r):this.$app.tmpl(n)}return this.$app.tmpl(n)},_render:function(t){return r.render(this,t),Z()},$controller:function(t){r.ctrl=t},$inject:function(n,e,i){return this.$app.inject(n,t.extend({$view:this.$view,$cp:this},e),i)},$link:function(t,n){return(this.$ownerView||this.$view).$link(t,n)}},i).$extend(n);o.$id||(o.$id=t.makeAutoId()),e&&o.$parent&&o.$withData(t.extend({},o.$parent.$withData())),o.$attrs&&(o.$attrs._setCP(o),o.$name=t.trim(o.$attrs.$getAttr("name")));var s,l,f=o.$app,h=o.$elseList;if(h){var p,l=o.$whereList;t.each(h,function(t,n){p=N({$cmd:"else",$app:f,$attrs:J(l[n]),$view:o.$view,$contents:t,$parent:o},!1,i),h[n]=p}),o.$whereList=null}if(o.bgOnDispose(function(){m(this.$nodes);var n=this.$parent;n&&!n.bgIsDispose&&n.$removeChild(this),t.each(this.$elseList,function(t){t.bgIsDispose||t.bgDispose()}),this.$attrs&&this.$attrs.bgDispose(),x(this)}),o.bgDispose(r),i&&i.pushStep("CPCtrl",function(){if(!this.bgIsDispose){var t=r.ctrl,n=[];if(t&&(r.ctrl=null,n.push(this.$inject(t,{$view:this.$ownerView||this.$view}))),"view"!=this.$cmd&&this.$name){var e=this.$view;e[this.$name]=this.$export||this.$ownerView||e}return n}}.bind(o)),i&&i.pushStep("CPEvent",function(){if(!this.bgIsDispose){var n=this.$view,e=n.$init(this.$name+"");return e&&t.each(e,function(t){this.$init(t)},this),e=n.$ready(this.$name+""),e&&t.each(e,function(t){this.$ready(t)},this),[]}}.bind(o)),o.$cmd){s=f.command(o.$cmd);var v=function(){s&&(s=s.fn),s&&c(X,s(o)),r.render(o,i)};s||"else"==o.$cmd?v():c(X,o.$app.usingAll("command::"+o.$cmd).then(function(){s=f.command(o.$cmd),v()}))}else r.render(o,i);return o},D=function(t,n){return d({$contents:t})},P=function(n,e){var i=[],r=d({$contents:n,$getAttr:function(t){return this[t]?this[t].$contents:""},$setAttr:function(t,n){this[t]?this[t].$contents=n:(i.push(t),this[t]=D(n,e))},_setCP:function(n){this.$view=n.$view,this.$cp=n,this.$withData(n.$withData());var e;t.each(i,function(t){e=this[t],e.$cp=n,e.$app=n.$app,e.$view=n.$view,e.$withData(n.$withData())},this)}});return r.bgOnDispose(function(){t.each(i,function(t){this[t].bgDispose()},this)}),r},S=function(n){var e=p({$attr:function(t,n){var e=this.$node,i=arguments.length;switch(t){case"class":if(1==i)return e.className;e.className=n;break;case"value":var r="select"==e.tagName.toLowerCase();if(1==i)return(r?Rt:Vt)(e);(r?Rt:Vt)(e,n);break;default:if(1==i)return kt(e,t);kt(e,t,n)}},$prop:function(t,n){return 1==arguments.length?It(this.$node,t):void It(this.$node,t,n)},$css:function(t,n){return 1==arguments.length?Mt(this.$node,t):void Mt(this.$node,t,n)},$show:function(){Wt(this.$node)},$hide:function(){Jt(this.$node)},$on:function(n,e,r){i.push(t.sliceArray(arguments)),Lt.apply(this.$node,arguments)},$one:function(n,e,r){var o=t.sliceArray(arguments),s=this.$node;o[2]=function(){e&&e.apply(this,arguments),Ft.apply(s,arguments)},i.push(o),Lt.apply(s,o)},$off:function(t,n,e){Ft.apply(this.$node,arguments)},$is:function(t){return Zt(this.$node,t)},$parent:function(t){var n=Gt(this.$node,t);return n?E(n):null}}).$extend(n),i=[];return e.bgOnDispose(function(){t.each(i,function(t){Ft.apply(this.$node,t)}.bind(this))}),e},C="_bgvn_",T=function(t,n){n[C]=t},E=function(t){return t[C]},k=function(n,e,i){var r=n.$ownerView||n.$view,o=S({$view:r,$app:r.$app,$cp:n,$node:e,$attrs:p({}),_addAttr:function(t,n){return this.$attrs[t]=I(this,t,n,i)}});return T(o,e),Et(o,e),n.$virtualNodes.push(o),o.bgOnDispose(function(){e[C]=null;var n=this.$attrs;t.eachProp(n,function(t){t.bgDispose()})}),o},I=function(t,n,e,i){var r=t.$cp,o=d(S({$cp:r,$vNode:t,$node:t.$node,$app:t.$app,$view:t.$view,$name:n,$contents:e}),i);o.$withData(r.$withData());var s=o.$app.attr(n),u=s&&s(o);return i&&i.pushStep("CPInit",function(){return u}.bind(this)),o},L=/\{\{\s*(\/?)\s*([^\s{}]+)\s*((?:(?:.|\n|\r)(?!\{\{|\}\}))*)(.?)\}\}/gi,F=/\{\{\s*(\/?if|else)\s*(.*?)\}\}/gi,V=/(\S+)\s*=\s*(?:\"((?:\\\"|[^"])*?)\"|\'((?:\\\'|[^'])*?)\')/gi,R=/\<\!\-\-((?:.|\n|\r)*?)\-\-\>/g,U=function(t){return["<",'script type="text/html" bg-id="',t,'"></',"script>"].join("")},q=function(t,n){t._view.push(n)},B=function(n,e){n._view=t.removeArrayItem(e,n._view)},H=function(n,e){var i=t.inArray(function(t){return t.$name==e},n._view);return i>-1?n._view[i]:null},M=function(n){var e,i,r,o,s,u,a,c,l,f=[],h=[],p=0,d=0,v=0;for(L.lastIndex=0,n=n.replace(R,"");e=L.exec(n);)u=e[0],c=e.index,o=e[2],i="/"==e[4]||"else"==o||"case"==o,r=i||"/"==e[1],s=e[3],!i&&(s+=e[4]),0==v&&(!i&&r||(a=n.substr(p,c-p),h.push(a),l=t.makeAutoId(),h.push(U(l)),f.push({id:l,index:c,single:i,end:r,tag:o,attrs:s,contents:""})),d=c+u.length),r?(i||v--,0==v&&(f[f.length-1].contents=n.substr(d,c-d))):v++,p=c+u.length;return h.push(n.substr(p,n.length-p)),{contents:h.join(""),regs:f}},z=function(n,e,i){var r,o,s=[];t.isString(n)||(n=t.toStr(n));var u=M(n);n=u.contents,t.each(u.regs,function(n){var e,o,u,a=n.tag,c=n.contents;if(c&&(c=t.trim(c)),"if"==a){var l=W(c);c=l.contents,e=l.elseList,o=l.whereList}u={$id:n.id,$cmd:a,$attrs:J(n.attrs,i),$contents:c,$elseList:e,$whereList:o},"view"==u.$cmd&&(r=u),s.push(u)}),r?(o=t.app(r.$attrs.$getAttr("app")),o==t.defualtApp&&(o=e.$app),r=$({$name:t.trim(r.$attrs.$getAttr("name")),$app:o,$parent:e.$view,$ownerCP:e},i),e.$ownerView=r):(o=e.$app,r=e.$view);var a,c=[];t.each(s,function(n){a=N(t.extend(n,{$view:r,$app:o,$parent:e}),!0,i),c.push(a)}),e.$children=c,e.tmplTag=n},W=function(n){var e,i,r=0,o=-1,s=-1;F.lastIndex=0;for(var u,a=[],c=[];e=F.exec(n);)switch(i=e[1],u=t.trim(e[2]),i){case"if":r++;break;case"else":0>=r&&(c.push(u),-1==s&&(s=e.index),o>=0&&a.push(n.substr(o,e.index-o)),o=e.index+e[0].length);break;case"/if":r--}return 0>=r&&a.push(n.substr(o)),{contents:s>-1?n.substr(0,s):n,elseList:a,whereList:c}},J=function(t,n){V.lastIndex=0;for(var e,i=P(t,n);e=V.exec(t);)i.$setAttr(e[1],e[2]||e[3]);return i},X=[],Z=function(){var t=X;return X=[],u.always(t).then(function(){return X.length>0?Z():void 0})},G=function(n){var e,i={},r=function(i,r){var o=n!==!1&&(r.indexOf("Ready")>0||r.indexOf("Init")>0),s=function(){var n=[];return t.each(i,function(t){l(n,t())}),f(n,!0).then(e.doneStep(r))};return o?t.aFramePromise().then(s):s()},o=!1;return e={pushStep:function(t,n){i[t]?i[t].push(n):i[t]=[n],o&&this.doneStep(t)()},doneStep:function(t){var n=i[t],e=n&&n.length>0;return e&&(i[t]=[]),function(){return e?r(n,t):null}},end:function(){o=!0}}},Q=":scope ";try{tt.querySelector(":scope body")}catch(K){Q=""}var Y=document,tt=Y.documentElement,nt=function(t,n){return n||(n=tt),n.querySelectorAll(Q+t)},et=function(t){t.parentNode&&t.parentNode.removeChild(t)},it={select:[1,"<select multiple='multiple'>","</select>"],fieldset:[1,"<fieldset>","</fieldset>"],table:[1,"<table>","</table>"],tbody:[2,"<table><tbody>","</tbody></table>"],tr:[3,"<table><tbody><tr>","</tr></tbody></table>"],colgroup:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],map:[1,"<map>","</map>"],div:[1,"<div>","</div>"]},rt=/\/(java|ecma)script/i,ot=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,st=function(n){if(n.src)t.defualtApp.using(n.src);else{var e=(n.text||n.textContent||n.innerHTML||"").replace(ot,"");e&&(window.execScript||function(t){window.eval.call(window,t)})(e)}},ut=function(n,e){t.each(n.querySelectorAll("script"),function(t){t.type&&!rt.test(t.type)||(et(t),e&&st(t))})},at=function(n,e,i){var r=e?t.isString(e)?e:e.tagName.toLowerCase():"",o=it[r]||it.div,s=o[0];n=o[1]+n+o[2];var u=Y.createElement("div");for(u.innerHTML=n;s--;)u=u.lastChild;return ut(u,i),t.sliceArray(u.childNodes)},ct=function(n,e,i){var r;n.length>1?(r=document.createDocumentFragment(),t.each(n,function(t){r.appendChild(t)})):r=n[0],"appendTo"==i?e.appendChild(r):e.parentNode[i](r,e)},lt=at("<option>test</option><!--test-->","select").length>1,ft="bg-virtual",ht=function(t){var n=lt?["<!--bg-virtual-->"].join(""):U(t.$id);return at(n)[0]},pt=/script/i,dt=function(t){return pt.test(t.tagName)?t.getAttribute("bg-id"):null},vt=function(t){return lt?8==t.nodeType&&0==t.nodeValue.indexOf(ft):pt.test(t.tagName)?t.getAttribute("bg-id"):!1},$t=function(n,e){var i=0==n.length;i||(i=t.inArray(function(t){return!vt(t)},n)<0),i&&n.push(ht(e))},gt=function(n,e,i,r){var o=Ct(e.tmplTag),s=at(o,"appendTo"==i?n:n.parentNode,!0);if(s.length>0){var u=s[0].parentNode;Tt(e,s,r),bt(s,e,r),s=t.sliceArray(u.childNodes)}$t(s,e),ct(s,n,i),e.$setNodes(s)},bt=function(n,e,i){var r,o;t.each(n,function(t){1==t.nodeType&&(r=dt(t),r?(o=e.$getChild(r),o&&(gt(t,o,"insertBefore",i),et(t))):bt(nt("script",t),e,i))})},mt=function(n){var e=n.view,i=G(!n.cp||n.cp.$isAFrame),r=n.cp||N({$app:e.$app||t.defualtApp,$parent:n.parent||e.$ownerCP,$view:e,$contents:n.tmpl},!1,i).$tmpl(n.tmpl);return r._render(i).then(function(){return u.resolve().then(i.doneStep("CPCtrl")).then(i.doneStep("ViewCtrl")).then(i.doneStep("CPEvent")).then(function(){var t=n.context,e=n.opName;gt(t,r,e,i)}).then(i.doneStep("CPInit")).then(i.doneStep("ViewInit")).then(i.doneStep("CPReady")).then(i.doneStep("ViewReady"))}).then(function(){return i.end(),r})},yt=t.attrEncode=function(t){return t?t.replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\&/g,"&amp;").replace(/\"/g,"&quot;"):""};t.attrDecode=t.htmlDecode;var wt=/\<.*?\[\[.*?\]\][^>]*\>/gi,xt=/\s*(\S+)\s*=\s*((\")(?:\\\"|[^"])*?\[\[.+?\]\](?:\\\"|[^"])*\"|(\')(?:\\\'|[^'])*?\[\[.+?\]\](?:\\\'|[^'])*\')/gi,_t=/\s*(\/?\>)$/,At=/^\s*['"](.*?)['"]\s*$/,jt=/^\s*\[\[(.*?)\]\]\s*$/,Ot=/\[\[(.*?)\]\]/g,Nt="bg-virtual",Dt=[" ",Nt,'="'].join(""),Pt='" $1',St="["+Nt+"]",Ct=function(t){return t=t.replace(wt,function(t,n,e){xt.lastIndex=0;var i={},r=!1,o=!1,s=t.replace(xt,function(t,n,e,s,u){return o||n==Nt?(r=!1,void(o=!0)):(s=s||u,e=e.replace(At,"$1").replace(jt,"$1"),Ot.lastIndex=0,Ot.test(e)&&(e=s+e.replace(Ot,s+" + ($1) + "+s)+s),i[n]=e,r=!0,"")});return r&&(s=s.replace(_t,[Dt,yt(JSON.stringify(i)),Pt].join(""))),o?t:s})},Tt=function(n,e,i){var r;t.each(e,function(e){1==e.nodeType&&(e.hasAttribute(Nt)&&k(n,e,i),e.hasChildNodes&&(r=nt(St,e),r.length>0&&t.each(r,function(t){k(n,t,i)})))})},Et=function(n,e){var i=e.getAttribute(Nt),r=JSON.parse(i);e.removeAttribute(Nt);t.eachProp(r,function(t,e){n._addAttr(e,t)})},kt=function(t,n,e){return arguments.length<3?t.getAttribute(n):void t.setAttribute(n,e)},It=function(t,n,e){return arguments.length<3?t[n]:void(t[n]=e)},Lt=document.addEventListener,Ft=document.removeEventListener,Vt=function(t,n){return arguments.length<2?t.value:void(t.value=n)},Rt=function(n,e){var i="select-one"==n.type;if(i){if(arguments.length<2)return n.value;n.value=e}else{var r=n.options,o=[];if(arguments.length<2)return t.each(r,function(t){t.selected&&!t.disabled&&o.push(t.value)}),o;t.isArray(e)||(e=[e]),t.each(r,function(t){t.selected=e.indexOf(t.value)>=0})}},Ut=document.defaultView.getComputedStyle,qt={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},Bt=function(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},Ht=function(n,e){return t.isNumeric(e)&&!qt[Bt(n)]?e+"px":e},Mt=function(t,e,i){var r=arguments.length;if(3>r)return 1==r?n:t.style[Bt(e)]||Ut(t,"").getPropertyValue(Bt(e));var o=null;e=Bt(e),""==i?t.style.removeProperty(e):o=e+":"+Ht(e,i),o&&(t.style.cssText+=";"+o)},zt=function(t){var n="_bgshow_";return n in t?t[n]:t[n]=Mt(t,"display")},Wt=function(t){var n=zt(t);Mt(t,"display","none"==n?"block":n)},Jt=function(t){zt(t),Mt(t,"display","none")},Xt=tt.matchesSelector||tt.mozMatchesSelector||tt.webkitMatchesSelector||tt.oMatchesSelector||tt.msMatchesSelector,Zt=function(t,n){return Xt.call(t,n)},Gt=function(t,n){return t=t.parentNode,t&&t!=tt&&t!=Y?!n||Zt(t,n)?t:Gt(t,n):null};t.app.extend({_view:[],view:function(n){if(0==arguments.length)return this._view;if(t.isString(n))return H(this,n);var e=b(n);return e?e.$ownerView||e.$view:null},cp:function(t){return b(t)}}),t.rootView=function(){return Qt};var Qt=$({$name:"",$app:t.app("")}),Kt=N({$app:t.defualtApp,$parent:null,$view:Qt,$contents:"",$ownerView:Qt});Qt.$ownerCP=Kt,t.compile=function(t){var n=b(t)||Kt,e=n.$app,i=n.$view;return e.usingAll().then(function(){var r=e.tmpl(t).then(function(e){return t.innerHTML="",mt({tmpl:e,view:i,parent:i.$ownerCP||n,context:t,opName:"appendTo"}).then(function(t){return t.$parent.$children.push(t),t})});return r})},t.bgEventDef("ready"),function(){var n="DOMContentLoaded",e=function(){Y.removeEventListener(n,e,!1),window.removeEventListener("load",e,!1),t.bgEnd("ready")};Y.addEventListener(n,e,!1),window.addEventListener("load",e,!1),window.addEventListener("unload",function(){t.rootView().$ownerCP.$remove()},!1)}()}(bingo),function(t){"use strict";var n=t.defualtApp;n.service("$rootView",function(){return t.rootView()}),n.service("$inject",["$view",function(t){return function(n,e,i){return t.$inject(n,e,i)}}]),n.service("$location",["$app",function(t){return function(n){return t.location(n)}}]),n.service("$ajax",["$app",function(t){return function(n,e){return t.ajax(n,e)}}]),n.service("$observe",["$view",function(t){return function(n,e,i){return t.$observe(n,e,i)}}]),n.service("$layout",["$view",function(t){return function(n,e,i){return t.$layout(n,e,0,i)}}]),n.service("$tmpl",["$app",function(t){return function(n,e){return t.tmpl(n,!0,e)}}]);var e={};n.service("$cache",function(){return function(n,i,r){var o=[e].concat(t.sliceArray(arguments));return t.cache.apply(t,o)}});var i={};n.service("$param",function(){return function(n,e){return 1==arguments.length?t.cache(i,n):t.cache(i,n,e,10)}})}(bingo),function(t){"use strict";var n=t.defualtApp,e=function(n){var e=n.$attrs.$getAttr("controller");if(!t.isNullEmpty(e)){var i,r=n.$view,o=r.$parent,s=r.$app;if(o.bgTestProps(e)?i=o.bgDataValue(e):window.bgTestProps(e)&&(i=window.bgDataValue(e)),t.isFunction(i)&&t.isFunction(i))n.$view.$controller(i);else{var u="controller::"+e,a=s.routeContext(u),c=a.context();if(!c.controller)return s.using(u).then(function(){if(!n.bgIsDispose){var t=a.context();t.controller&&r.$controller(t.controller)}});r.$controller(c.controller)}}};n.command("view",function(t){return e(t)}),n.command("controller",function(t){var n=t.$attrs.$getAttr("src");return n?e(n):void t.$view.$controller(function(){t.$eval()})}),n.command("using",function(t){var n=t.$attrs.$getAttr("src");return n&&t.$app.using(n)}),n.command("service",function(t){var n=t.$attrs.$getAttr("src"),e=t.$attrs.$getAttr("name");return n&&e&&t.$inject(n).then(function(n){t.$view[e]=n})});var i=/[ ]*([^ ]+)[ ]+in[ ]+(?:(.+)[ ]+tmpl[ ]*=[ ]*(.+)|(.+))/;n.command("with",function(n){var e,r,o=n.$attrs.$contents;i.test(o)?(e=RegExp.$1,r=RegExp.$2||RegExp.$4):r=o,r&&n.$init(function(){var i=n.$attrs.$bindContext(r,!0),o=i()||{};t.extend({},n.$withData());return e?n.$withData(e,o):n.$withData(o),n.$html(n.$contents)})});var r=function(n,e,i,r,o){e=t.extend([],e),r=r||{};var s=[],u=e.length,a=[];return t.each(e,function(e,c){var l=t.extend({},r);l.itemName=i,l[[i,"index"].join("_")]=l.$index=c,l[[i,"count"].join("_")]=l.$count=u,l[[i,"first"].join("_")]=l.$first=0==c,l[[i,"last"].join("_")]=l.$last=c==u-1;var f=c%2==0;l[[i,"odd"].join("_")]=l.$odd=f,l[[i,"even"].join("_")]=l.$even=!f,l[i]=e,s.push(l),a.push(["{{with ",o,"[",c,"] }}",n,"{{/with}}"].join(""))},this),r[o]=s,a.join("")};n.command("for",function(n){n.$isAFrame=!1;var e=n.$attrs.$contents,o="_bg_for_datas_"+t.makeAutoId();if(i.test(e)){var s=RegExp.$1,u=RegExp.$2||RegExp.$4;s&&u&&(n.$attrs.$contents=u,n.$layout(function(){return n.$attrs.$result()},function(e){var i=e.value,u=t.isArray(i),a=u?i:t.sliceArray(i);!u&&0==a.length&&(a=i?[i]:[]);var c=r(n.$contents,a,s,n.$withData(),o);return n.$html(c)}))}n.bgOnDispose(function(){var t=n.$withData();delete t[o]})}),n.command("if",function(n){var e,i=n.$contents,r=n.$elseList,o=function(e,o){if(-1==e&&o)return i;var s=n.$attrs.$result();if(s)return i;var u;return t.each(r,function(t,n){return!t.$attrs.$contents||e==n&&o||t.$attrs.$result()?(u=t.$contents,!1):void 0}),u},s=function(i,r){return e?void 0:(e=!0,t.Promise.timeout(1).then(function(){return e=!1,n.$html(o(r,i.value))}))};n.$layout(function(){return n.$attrs.$result()},function(t){return s(t,-1)}),t.each(r,function(t,e){t.$attrs.$contents&&n.$layout(function(){return t.$attrs.$result()},function(t){return s(t,e)})})}),n.command("include",function(t){var n=t.$attrs.$getAttr("src");t.$init(function(){return n?t.$loadTmpl(n).then(function(n){return t.$html(n)}):t.$html(t.$contents)})}),n.command("html",function(t){t.$layout(function(){return t.$attrs.$result()},function(n){return t.$html(n.value)})}),n.command("text",function(t){t.$layout(function(){return t.$attrs.$result()},function(n){return t.$text(n.value)})}),n.command("cp",function(t){t.$tmpl(t.$contents),t.$export=t}),n.command("tmpl",function(t){var n=t.$attrs.$getAttr("id");if(n){var e=/app/i.test(t.$attrs.$getAttr("for"));t.$saveTmpl(n,t.$contents,e)}t.$init(function(){t.$remove()})}),n.command("route",function(t){var n=t.$attrs.$getAttr("src"),e=t.$app;n&&t.$init(function(){i.href(n)});var i={bgNoObserve:!0,url:n,name:t.$name,href:function(n){return this.url=n,t.$loadTmpl("route::"+n).then(function(n){return t.$html(n)})},queryParams:function(){return this.routeParams().queryParams},routeParams:function(){var t=this.url,n=e.routeContext("route::"+t);return n.params},reload:function(){return this.href(n)},toString:function(){return this.url},close:function(){t.$remove(),this.bgDispose()}};t.$name&&(t.$app._location[t.$name]=i),t.$export=i}),t.app.extend({_location:{},location:function(t){return this._location[t]}})}(bingo),function(t){"use strict";var n=t.defualtApp;t.app.extend({_attr:{},attr:function(t,i){return 1==arguments.length?this._attr[t]||n._attr[t]||n._attr[e]:void(this._attr[t]=i)}});var e="bg_default_vattr",i=/^\s*on/i;n.attr(e,function(n){var e=n.$name,r=n.$view;if(i.test(e)){var o=e.replace(i,""),s=function(t,e){var i=function(){return r.$updateAsync(),e.apply(this,arguments)};n.$on(t,i)},u=/^\s*\[(.|\n)*\]\s*$/g.test(n.$contents)?n.$result():n.$value();return t.isFunction(u)||t.isArray(u)||(u=function(t){return n.$eval(t)}),void s(o,u)}n.$layoutResult(function(t){if("value"==e&&n.$is("option")){var i=n.$parent("select");i&&i.$attrs.model&&i.$attrs.model.$value()==t.value&&n.$prop("selected",!0)}n.$attr(e,t.value)})}),n.attr("node",function(t){t.$init(function(){t.$value(t.$node)})}),t.each("checked,unchecked,disabled,enabled,readonly".split(","),function(t){n.attr(t,function(n){var e=function(e){switch(t){case"enabled":n.$prop("disabled",!e);break;case"unchecked":n.$prop("checked",!e);break;default:n.$prop(t,e)}};if(n.$layoutResult(function(t){e(t.value)}),"checked"==t||"unchecked"==t){var i=function(){var e=n.$prop("checked");n.$value("checked"==t?e:!e)};n.$on("click",i)}})}),t.each("show,hide,visible".split(","),function(t){n.attr(t,function(n){var e=function(e){switch(t){case"hide":e=!e;case"show":e?n.$show():n.$hide();break;case"visible":e=e?"visible":"hidden",n.$css("visibility",e)}};n.$layoutResult(function(t){e(t.value)})})}),n.attr("model",function(n){var e,i,r=function(t){return 0==arguments.length?n.$attr("value"):void n.$attr("value",t)},o=n.$node,s=n.$attr("type"),u="radio"==s,a="checkbox"==s,c=a?r(o):null,l="select"==o.tagName.toLowerCase(),f=function(){return a?n.$prop("checked")?c:"":r()},h=function(e){e=l&&t.isArray(e)?e:t.toStr(e),a?n.$prop("checked",r()==e):u?n.$prop("checked",r()==e):r(l?e:e)},p=function(){var t=f();(e!=t||u)&&(e=t,n.$value(t))};i=u?"click":"change",i&&n.$on(i,p),n.$layoutValue(function(t){var n=t.value;h(n)})})}(bingo);